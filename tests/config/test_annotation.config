/*
  ==============================================================
  test_annotation.config
  ==============================================================

  This file defines a test annotation workflow using bcftools annotate
  for testing purposes. It adds a mock annotation to the INFO tag.
*/

params {
    /*
      ------------------------------------------------------------
      annotation_cmd:

      A shell snippet or process definition containing the 
      essential annotation steps on a single VCF input. 

      This test version uses bcftools annotate to add a mock
      annotation to the INFO tag.
      ------------------------------------------------------------
    */

    annotation_cmd = """
      ${params.bcftools_cmd} view \${INPUT_BCF} |
      ${params.annotation_tool_cmd} annotate \
        --header-lines ${VCFSTASH_ROOT}/tests/config/mock_annotation_header.txt \
        -I +INFO/MOCK_ANNO="Test annotation value" \
        | ${params.bcftools_cmd} view -o \${OUTPUT_BCF} -Ob --write-index
    """

    /*
      ------------------------------------------------------------
      must_contain_info_tags:

      A list of INFO tags that should appear in the final 
      annotated VCF/BCF. The pipeline can verify these tags 
      at the end to ensure annotation was successful.
      ------------------------------------------------------------
    */
    must_contain_info_tags = [ 'MOCK_ANNO' ]

    /*
      ------------------------------------------------------------
      annotation_tool_version:

      Optional version marker or string for your annotation tool.
      ------------------------------------------------------------
    */
    required_tool_version = '1.20'
    reference_md5sum = '28a3d9f0162be1d5db2011aa30458129'
}
